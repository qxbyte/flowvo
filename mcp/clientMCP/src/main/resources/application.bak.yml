# Spring AI MCP Client 配置文件 - 多服务器独立控制版本
spring:
  application:
    name: clientMCP
  ai:
    mcp:
      client:
        # 🔑 关键：完全禁用Spring AI自动配置，避免启动时强制连接
        enabled: false
        lazy-initialization: true
        fail-fast: false

# 管理端点配置
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,mcpstatus
      base-path: /actuator
  endpoint:
    health:
      show-details: always
      status:
        order: "UP,UNKNOWN,DOWN"
    info:
      enabled: true
  info:
    env:
      enabled: true
    java:
      enabled: true
  health:
    defaults:
      enabled: false
    mcp:
      enabled: true
      timeout: 3s

# 服务器配置
server:
  port: 9092
  shutdown: graceful
  max-http-post-size: 10MB

# 日志配置优化
logging:
  level:
    root: INFO
    org.mcp.clientmcp: DEBUG
    org.springframework.ai.mcp: WARN
    org.springframework.web.reactive: WARN
    reactor.netty: WARN
    io.netty: WARN
    org.springframework.ai.mcp.client: WARN
  
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss.SSS} %5level [%15.15thread] %-50.50logger{49} : %msg%n"
    file: "%d{yyyy-MM-dd HH:mm:ss.SSS} %5level [%15.15thread] %-50.50logger{49} : %msg%n"
  
  file:
    name: logs/mcp-client.log
    max-size: 10MB
    max-history: 7

# 新的多服务器配置 - 每个服务器独立控制
mcp:
  servers:
    configs:
      # 文件MCP服务器配置
      file-server:
        enabled: false  # 可独立启用/禁用
        name: "File MCP Server"
        url: "http://localhost:9091"
        sseEndpoint: "/sse"
        healthEndpoint: "/actuator/health"
        type: "FILE"
        description: "文件操作MCP服务器，提供文件和目录管理功能"
        connection:
          timeout: 5000
          readTimeout: 10000
          healthCheckInterval: 60000
        retry:
          maxAttempts: 10
          interval: 30000
          autoRetry: true # 自动或手动重试

# 遗留的单服务器配置（向后兼容）
  client:
    enabled: true
    server:
      url: http://localhost:9091
      sse-endpoint: /sse
      health-endpoint: /actuator/health
    connection:
      timeout: 5000
      retry-max: 10
      retry-interval: 30000
      health-check-interval: 60000

# 应用信息
info:
  app:
    name: Spring AI MCP Client
    description: MCP客户端应用程序 - 多服务器独立控制版本
    version: 2.2-multi-server
    encoding: UTF-8
    java.version: ${java.version}
  mcp:
    protocol-version: "1.0.0"
    architecture: "multi-server"
    fault-tolerance: "enabled"
    features:
      - "多服务器独立管理"
      - "每个服务器独立启用/禁用"
      - "协议握手"
      - "工具发现"
      - "功能调用"
      - "持久连接"
      - "容错重试"
      - "延迟初始化"
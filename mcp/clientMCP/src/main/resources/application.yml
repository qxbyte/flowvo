# Spring AI MCP Client é…ç½®æ–‡ä»¶ - æ¢å¤Spring AIæ ‡å‡†é…ç½®
spring:
  application:
    name: clientMCP
  ai:
    # === APIé…ç½®ï¼ˆæ”¯æŒOpenAIå’ŒDeepSeekï¼‰===
    openai:
      api-key: ${OPENAI_API_KEY:}
      #      base-url: ${OPENAI_BASE_URL:https://api.openai.com}
      chat:
        enabled: true
        options:
          model: ${OPENAI_MODEL:gpt-3.5-turbo}
          temperature: 0.7
          max-tokens: 1000
      # ç½‘ç»œé…ç½®ä¼˜åŒ–
      timeout: 60s
      retry:
        max-attempts: 3
        delay: 2s
    
    # MCPå®¢æˆ·ç«¯é…ç½®
    mcp:
      client:
        # ğŸ”‘ å¯ç”¨Spring AIè‡ªåŠ¨é…ç½®ï¼Œè·å–çœŸå®serverç«¯tools
        enabled: true
        # é…ç½®è¿æ¥åˆ°fileMCPæœåŠ¡å™¨
        sse:
          connections:
            server1:
              url: http://localhost:19091
              sse-endpoint: /sse
            server2:
              url: http://localhost:19092
              sse-endpoint: /sse
        # æœ¬åœ° mcp server
        stdio:
          servers-configuration: classpath:mcp-servers.json
#        request-timeout: 60s   # è¿œç¨‹è°ƒç”¨è¶…æ—¶æ—¶é—´
        # å®¢æˆ·ç«¯é€‰é¡¹
        options:
          request-timeout: 60s
          connect-timeout: 30000
          initialized: true
          # æ·»åŠ è°ƒè¯•é€‰é¡¹
          logging:
            enabled: true
          # å¢åŠ è¯·æ±‚ä½“å¤§å°é™åˆ¶
          max-request-size: 50MB

# ç®¡ç†ç«¯ç‚¹é…ç½®
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,mcpstatus
      base-path: /actuator
  endpoint:
    health:
      show-details: always
      status:
        order: "UP,UNKNOWN,DOWN"
    info:
      enabled: true
  info:
    env:
      enabled: true
    java:
      enabled: true
  health:
    defaults:
      enabled: false
    mcp:
      enabled: true
      timeout: 10s

# æœåŠ¡å™¨é…ç½®
server:
  port: 19090
  shutdown: graceful
  
  tomcat:
    max-http-form-post-size: 50MB    # å¢åŠ è¡¨å•æ•°æ®å¤§å°é™åˆ¶
    max-swallow-size: 50MB           # å¢åŠ è¯·æ±‚æ­£æ–‡æœ€å¤§ååé™åˆ¶
    connection-timeout: 60000        # å¢åŠ è¿æ¥è¶…æ—¶
    max-connections: 200             # å¢åŠ æœ€å¤§è¿æ¥æ•°

# æ—¥å¿—é…ç½®ä¼˜åŒ–
logging:
  level:
    root: INFO
    org.mcp.clientmcp: DEBUG
    org.springframework.ai.mcp: DEBUG
    org.springframework.web.reactive: WARN
    reactor.netty: INFO
    io.netty: WARN
    org.springframework.ai.mcp.client: DEBUG
    io.modelcontextprotocol: DEBUG    # å¢åŠ MCPåè®®æ—¥å¿—

  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss.SSS} %5level [%15.15thread] %-50.50logger{49} : %msg%n"
    file: "%d{yyyy-MM-dd HH:mm:ss.SSS} %5level [%15.15thread] %-50.50logger{49} : %msg%n"

  file:
    name: logs/mcp-client.log
  logback:
    rollingpolicy:
      max-file-size: 10MB
      max-history: 7

# åº”ç”¨ä¿¡æ¯
info:
  app:
    name: Spring AI MCP Client
    description: MCPå®¢æˆ·ç«¯åº”ç”¨ç¨‹åº - Spring AIæ ‡å‡†é…ç½®
    version: 2.3-spring-ai-standard
    encoding: UTF-8
    java.version: ${java.version}
  mcp:
    protocol-version: "1.0.0"
    architecture: "spring-ai-standard"
    fault-tolerance: "enabled"
    features:
      - "Spring AIè‡ªåŠ¨è£…é…"
      - "çœŸå®serverç«¯toolsè·å–"
      - "SSEè¿æ¥"
      - "åè®®æ¡æ‰‹"
      - "å·¥å…·å‘ç°"
      - "åŠŸèƒ½è°ƒç”¨"
      - "æŒä¹…è¿æ¥"
      - "è‡ªåŠ¨é‡è¯•"

sse:
  server:
    # å¢åŠ è¿æ¥é…ç½®è¶…æ—¶æ—¶é—´
    connection-timeout: 60s
    request-timeout: 60s
    # ä¼˜åŒ–é‡è¯•é…ç½®
    retry:
      max-attempts: 5
      # åˆå§‹åŒ–å»¶è¿Ÿ
      initial-delay: 1s
      max-delay: 10s

# å¯ç”¨ChatClientè‡ªåŠ¨é…ç½®
chat:
  client:
    enabled: true